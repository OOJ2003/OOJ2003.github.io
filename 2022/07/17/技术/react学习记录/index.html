

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">

  <link rel="apple-touch-icon" sizes="76x76" href="/img/cheems.png">
  <link rel="icon" href="/img/cheems.png">
  

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="OOJ2003">
  <meta name="keywords" content="">
  
    <meta name="description" content="è®°å½•ä¸‹å­¦ä¹ reactçš„å†…å®¹">
<meta property="og:type" content="article">
<meta property="og:title" content="reactå­¦ä¹ è®°å½•">
<meta property="og:url" content="https://ooj2003.github.io/2022/07/17/%E6%8A%80%E6%9C%AF/react%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/index.html">
<meta property="og:site_name" content="OOJ&#39;s Blog">
<meta property="og:description" content="è®°å½•ä¸‹å­¦ä¹ reactçš„å†…å®¹">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://i.redd.it/1qw47c5r01f91.jpg">
<meta property="article:published_time" content="2022-07-17T16:48:15.000Z">
<meta property="article:modified_time" content="2022-12-14T02:31:00.000Z">
<meta property="article:author" content="OOJ2003">
<meta property="article:tag" content="react">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://i.redd.it/1qw47c5r01f91.jpg">
  
  
  
  <title>reactå­¦ä¹ è®°å½• - OOJ&#39;s Blog</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- ä¸»é¢˜ä¾èµ–çš„å›¾æ ‡åº“ï¼Œä¸è¦è‡ªè¡Œä¿®æ”¹ -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"ooj2003.github.io","root":"/","version":"1.9.8","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":null,"tencent":{"sid":null,"cid":null},"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false},"umami":{"src":null,"website_id":null,"domains":null,"start_time":"2024-01-01T00:00:00.000Z","token":null,"api_server":null},"gtag":null,"woyaola":null,"cnzz":null},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 7.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>OOJ&#39;s Blog</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>é¦–é¡µ</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>å½’æ¡£</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>åˆ†ç±»</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>æ ‡ç­¾</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>å…³äº</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/" target="_self">
                <i class="iconfont icon-link-fill"></i>
                <span>å‹é“¾</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="reactå­¦ä¹ è®°å½•"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2022-07-17 16:48" pubdate>
          2022å¹´7æœˆ17æ—¥ ä¸‹åˆ
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          7.9k å­—
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          66 åˆ†é’Ÿ
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">reactå­¦ä¹ è®°å½•</h1>
            
            
              <div class="markdown-body">
                
                <p>å¾ˆæ—©ä¹‹å‰æœ‰å­¦è¿‡ä¸€ç‚¹ç®€å•çš„å‰ç«¯ï¼Œä¸»è¦å°±æ˜¯åŸç”Ÿçš„ js å’Œ html é‚£äº›ç©æ„å„¿ï¼Œä½†æ˜¯æˆ‘è¿™æ¡æ‡’ç‹—ä¹Ÿæ²¡åšæŒä¸‹å»ã€‚ã€‚ã€‚è¶ç€æš‘å‡ï¼Œæˆ‘å¾—é«˜ä½æ•´ç‚¹èƒ½çœ‹çš„ç©æ„å„¿å‡ºæ¥ï¼Œä¸ç„¶å­¦äº†å°ä¸€å¹´çš„è®¡ç®—æœºè¿ä¸ªç•Œé¢éƒ½æ“ä¸å‡ºæ¥ä¹Ÿå¤ªæŒ«äº†ã€‚</p>
<p>åŸå…ˆå®šçš„è®¡åˆ’æ˜¯æç‚¹ vueï¼Œä½†æ˜¯æï¼Œæ¨¡æ¿è¯­æ³•çœ‹ç€ç¡®å®æœ‰ç‚¹å¥‡æ€ªï¼Œè€Œä¸” react å‡½æ•°å¼çš„å†™æ³•çœ‹èµ·æ¥æœ‰ç‚¹æ„æ€ï¼Œæ‰€ä»¥å°±å†³å®šæ˜¯ä½ äº†ï¼Œreactï¼</p>
<h1 id="the-basis">The Basis</h1>
<h2 id="ç¯å¢ƒå‡†å¤‡">ç¯å¢ƒå‡†å¤‡</h2>
<blockquote>
<p>å·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨</p>
</blockquote>
<pre><code class="hljs">              --ã€Šè®ºè¯­Â·å«çµå…¬ã€‹</code></pre>
<p>æ¯•ç«Ÿç°åœ¨å·²ç»æ˜¯ 2202 å¹´äº†ï¼Œé¡¹ç›®å¼€å‘ä¸€èˆ¬éƒ½ä¼šæœ‰ä¸“é—¨çš„è„šæ‰‹æ¶æ¥é…ç½®ï¼Œè¿™é‡Œæˆ‘å°±é‡‡ç”¨äº† pnpm + vite çš„é…ç½®ã€‚</p>
<p>pnpm æ˜¯ä¸ªæ–°çš„åŒ…ç®¡ç†å™¨ï¼Œä½†æ˜¯å®ƒæœ‰å¾ˆå¤šçš„åˆ›æ–°ä¹‹å¤„ï¼Œæ‰€ä»¥èŠ‚çœç©ºé—´è¿˜æ¯”è¾ƒå¿«ã€‚vite ä¹Ÿæ˜¯ä¸€æ ·çš„é“ç†ï¼Œè¿™ä¸ªæ–°çš„æ‰“åŒ…å·¥å…·æ„å»ºé€Ÿåº¦éå¸¸çš„å¿«ï¼Œæ¯” webpack å¿«åˆ°ä¸çŸ¥é“å“ªé‡Œå»äº† ğŸ¤“ã€‚</p>
<p>ç¼–è¾‘å™¨æˆ‘é€‰æ‹©çš„æ˜¯ vscodeï¼Œä»¥ä¸‹ä¸ºéœ€è¦å®‰è£…çš„æ’ä»¶</p>
<ol type="1">
<li><a target="_blank" rel="noopener" href="https://marketplace.visualstudio.com/items?itemName=dsznajder.es7-react-js-snippets">ES7+ React/Redux/React-Native/JS snippets</a> è¿™ä¸ªæ’ä»¶æä¾›äº† react ç›¸å…³çš„è¡¥å…¨</li>
<li><a target="_blank" rel="noopener" href="https://marketplace.visualstudio.com/items?itemName=antfu.vite">vite</a> ç”¨æ¥æ­é… vite é¡¹ç›®ä½¿ç”¨</li>
<li><a target="_blank" rel="noopener" href="https://marketplace.visualstudio.com/items?itemName=dbaeumer.vscode-eslint">eslint</a> æä¾›é’ˆå¯¹ js/ts çš„é™æ€æ£€æŸ¥</li>
<li><a target="_blank" rel="noopener" href="https://marketplace.visualstudio.com/items?itemName=esbenp.prettier-vscode">prettier</a> ä»£ç æ ¼å¼åŒ–å·¥å…·</li>
</ol>
<p>é¦–å…ˆæ¥åˆ›å»ºé¡¹ç›®</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">pnpm create vite<br></code></pre></td></tr></table></figure>
<p>é¡¹ç›®çš„é…ç½®å¾ˆç®€å•ï¼Œéµå¾ªæŒ‡ç¤ºé€‰æ‹©åå›è½¦å³å¯ã€‚</p>
<figure>
<img src="https://cdn.jsdelivr.net/gh/OOJ2003/blog-img/data/image-20220717190437518.png" srcset="/img/loading.gif" lazyload alt="é¡¹ç›®é…ç½®" /><figcaption aria-hidden="true">é¡¹ç›®é…ç½®</figcaption>
</figure>
<p>å¤§è‡´æ•ˆæœå¦‚ä¸‹</p>
<figure>
<img src="https://cdn.jsdelivr.net/gh/OOJ2003/blog-img/data/image-20220717224154452.png" srcset="/img/loading.gif" lazyload alt="æµè§ˆå™¨æ¼”ç¤ºç”»é¢" /><figcaption aria-hidden="true">æµè§ˆå™¨æ¼”ç¤ºç”»é¢</figcaption>
</figure>
<p>é¡ºå¸¦ä¸€æï¼Œvite æ’ä»¶ä¹Ÿæä¾›äº†åœ¨ vscode ä¸­çš„å®æ—¶é¢„è§ˆ</p>
<figure>
<img src="https://cdn.jsdelivr.net/gh/OOJ2003/blog-img/data/2022-07-17_22-452022-07-17.png" srcset="/img/loading.gif" lazyload alt="vscodeä¸­çš„é¢„è§ˆ" /><figcaption aria-hidden="true">vscodeä¸­çš„é¢„è§ˆ</figcaption>
</figure>
<h2 id="åŸºç¡€çš„å‡½æ•°ç»„ä»¶å’Œ-jsx">åŸºç¡€çš„å‡½æ•°ç»„ä»¶å’Œ jsx</h2>
<p>jsx æ˜¯ react æœ€æœ‰è¶£çš„ç‰¹æ€§ä¹‹ä¸€ï¼Œé€šè¿‡ jsx ,å¯ä»¥å¾ˆè½»æ¾çš„å°†è§†å›¾å’Œé€»è¾‘ç»‘å®šåˆ°ä¸€èµ·ã€‚æ¢è¨€ä¹‹ï¼Œå°±æ˜¯ä¸ç”¨å†å»å•ç‹¬å¤„ç† html å’Œ css äº†ï¼ŒåŸºæœ¬ä¸Šæ‰€æœ‰çš„ä¸œè¥¿éƒ½å¯ä»¥æ‰”åˆ° jsx é‡Œé¢æ¥å†™ã€‚</p>
<h3 id="æ ¹èŠ‚ç‚¹å’Œå®é™…çš„-dom-æ ‘">æ ¹èŠ‚ç‚¹å’Œå®é™…çš„ dom æ ‘</h3>
<p>å½“æˆ‘ä»¬é€šè¿‡ react å»åˆ›å»ºç»„ä»¶æ—¶ï¼Œå®ä¾‹åŒ–çš„ç»„ä»¶å¿…å®šä¼šåœ¨ dom æ ‘ä¸Šæœ‰æ‰€ä½“ç°ã€‚æ¯”å¦‚ä¸€ä¸ª button ç»„ä»¶å¯èƒ½å°±æ˜¯ä¸€ä¸ªå¥—ç€ div å¹¶ä¸”ç»‘å®šäº†ç›¸å…³å›è°ƒå‡½æ•°çš„ button ï¼ˆåŸç”Ÿï¼‰ç»„ä»¶ã€‚æ‰€ä»¥ä¸ºäº†å°†æˆ‘ä»¬å†™çš„ç»„ä»¶æ¸²æŸ“åˆ°æµè§ˆå™¨ä¸­ï¼Œreact å¿…é¡»å°†æˆ‘ä»¬çš„ç»„ä»¶é€šè¿‡æŸç§æ–¹å¼æŒ‚è½½åˆ°å…¥å£çš„ html æ–‡ä»¶ä¸­ã€‚</p>
<p>åœ¨è¿™ä¸ªé¡¹ç›®é‡Œï¼Œreact åˆ™æ˜¯åˆ›å»ºäº†ä¸€ä¸ªæ ¹ç»„ä»¶ï¼Œå¹¶å°†æˆ‘ä»¬åˆ›å»ºçš„å…¶ä»–ç»„ä»¶åœ¨æ ¹ç»„ä»¶ä¸­ç»„åˆï¼Œæœ€åå°†æ ¹ç»„ä»¶æŒ‚è½½åˆ° html æ–‡ä»¶ä¸Šã€‚</p>
<p>è¿™ç‚¹ä»é¡¹ç›®ä¸­ index.html å’Œ main.jsx çš„æ–‡ä»¶å†…å®¹ä¹Ÿå¯ä»¥çœ‹å‡ºã€‚</p>
<p>index.html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;icon&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;image/svg+xml&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;/vite.svg&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Vite + React<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;root&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;module&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;/src/main.jsx&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>
<p>main.jsx</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">ReactDOM</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react-dom/client&quot;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./App&quot;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;./index.css&quot;</span>;<br><br><span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">createRoot</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;root&quot;</span>)).<span class="hljs-title function_">render</span>(<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">React.StrictMode</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">App</span> /&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">React.StrictMode</span>&gt;</span></span><br>);<br></code></pre></td></tr></table></figure>
<p>æ˜¾ç„¶ï¼Œè¿™é‡Œ react æ˜¯é€šè¿‡ getElementByID è¿™ä¸ªæ–¹æ³•è·å–äº† index.html ä¸­ id ä¸º root çš„ dom å…ƒç´ ï¼Œå¹¶åœ¨å…¶ä¸­æ¸²æŸ“äº† &lt;App /&gt; è¿™ä¸ªç»„ä»¶ã€‚</p>
<p>App.jsx</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> &#123; useState &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><span class="hljs-keyword">import</span> reactLogo <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./assets/react.svg&quot;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;./App.css&quot;</span>;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;App&quot;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;https://vitejs.dev&quot;</span> <span class="hljs-attr">target</span>=<span class="hljs-string">&quot;_blank&quot;</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;/vite.svg&quot;</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;logo&quot;</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;Vite logo&quot;</span> /&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;https://reactjs.org&quot;</span> <span class="hljs-attr">target</span>=<span class="hljs-string">&quot;_blank&quot;</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&#123;reactLogo&#125;</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;logo react&quot;</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;React logo&quot;</span> /&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Vite + React<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;card&quot;</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> setCount((count) =&gt; count + 1)&#125;&gt;</span><br><span class="language-xml">          count is &#123;count&#125;</span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">          Edit <span class="hljs-tag">&lt;<span class="hljs-name">code</span>&gt;</span>src/App.jsx<span class="hljs-tag">&lt;/<span class="hljs-name">code</span>&gt;</span> and save to test HMR</span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;read-the-docs&quot;</span>&gt;</span></span><br><span class="language-xml">        Click on the Vite and React logos to learn more</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span>;<br></code></pre></td></tr></table></figure>
<p>è€Œåœ¨ App.jsx ä¸­ï¼Œåˆ™æ˜¯é€šè¿‡ App å‡½æ•°ï¼Œè¿”å›äº†ä¸€æ®µ jsxï¼Œè¿™é‡Œé¢å°±æ˜¯å®é™…ä¸Šæè¿°é¡µé¢çš„å†…å®¹ã€‚</p>
<p>è¿™é‡Œç¨å¾®å²”å¼€ä¸‹è¯é¢˜ï¼ŒReact ä¸­é€šè¿‡é¦–å­—æ¯æ˜¯å¦ä¸ºå¤§å†™æ¥åˆ¤æ–­ä¸€ä¸ªå‡½æ•°æ˜¯ç»„ä»¶è¿˜æ˜¯æ™®é€šå‡½æ•°ï¼Œæ‰€ä»¥è¿™é‡Œçš„ App() å‡½æ•°é¦–å­—æ¯æ˜¯å¤§å†™çš„ã€‚</p>
<h3 id="ä¸€åˆ‡çš„å¼€å§‹ç¬¬ä¸€ä¸ªç»„ä»¶-hello-world">ä¸€åˆ‡çš„å¼€å§‹ï¼Œç¬¬ä¸€ä¸ªç»„ä»¶ &amp;&amp; Hello, World!</h3>
<p>å½“ç„¶å¯¹äºæˆ‘ä»¬è¿™æ ·çš„èŒæ–°è€Œè¨€ï¼Œè„šæ‰‹æ¶é‡Œæä¾›çš„ä»£ç ä¹Ÿæ˜¯æœ‰ç‚¹éš¾æ‡‚ã€‚ã€‚ã€‚ä¸ºäº†å­¦ä¹ èµ·è§ï¼Œæˆ‘ä»¬éœ€è¦å¯¹é¡¹ç›®ä¸­çš„ä»£ç åšä¸€äº›è°ƒæ•´ã€‚</p>
<p>å…·ä½“çš„è°ƒæ•´å¦‚ä¸‹ï¼š</p>
<ol type="1">
<li><p>src ç›®å½•ä¸‹ä»…ä¿ç•™ main.jsx å’Œ App.jsx ï¼Œå…¶ä½™æ–‡ä»¶å…¨éƒ¨åˆ é™¤ã€‚</p></li>
<li><p>åˆ é™¤ main.jsx ä¸­çš„ä¸éœ€è¦çš„ import è¯­å¥ï¼Œç›´è‡³ä»£ç å¦‚ä¸‹ã€‚</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">ReactDOM</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react-dom/client&quot;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./App&quot;</span>;<br><br><span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">createRoot</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;root&quot;</span>)).<span class="hljs-title function_">render</span>(<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">React.StrictMode</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">App</span> /&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">React.StrictMode</span>&gt;</span></span><br>);<br></code></pre></td></tr></table></figure></li>
<li><p>åˆ é™¤ App.jsx ä¸­çš„å¤§éƒ¨åˆ†è¯­å¥ï¼Œç›´è‡³ä»£ç å¦‚ä¸‹ã€‚</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;App&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span>;<br></code></pre></td></tr></table></figure></li>
</ol>
<p>ä¹‹åæˆ‘ä»¬æ‰€æœ‰çš„æ“ä½œå°±åªåœ¨ App.jsx ä¸­è¿›è¡Œï¼Œæ–¹ä¾¿ç®¡ç†ã€‚å½“ç„¶å®é™…çš„é¡¹ç›®å¼€å‘å¹¶ä¸ä¼šåƒæˆ‘ä»¬è¿™æ ·ä¹±æï¼Œå¤§æ¦‚ç‡æ˜¯ä¼šå°†ä¸åŒçš„ç»„ä»¶æ‹†åˆ†åˆ°ä¸åŒçš„æ–‡ä»¶ä¸­ï¼Œä¸ç„¶æƒ³æƒ³çœ‹å•æ–‡ä»¶å‡ ä¸‡è¡Œçš„å±å±±é¡¹ç›®ï¼Œå¯¹äºå¼€å‘è€…æ¥è¯´ç®€ç›´å°±æ˜¯äººé—´åœ°ç‹±ã€‚</p>
<p>OK,æˆ‘ä»¬ç°åœ¨æ¥å†™æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªç»„ä»¶ï¼Œæˆ‘ä»¬å¸Œæœ›è¿™ä¸ªç»„ä»¶åº”è¯¥èƒ½å¤Ÿæ¸²æŸ“ä¸€æ®µæ–‡æœ¬ï¼Œå…¶å†…å®¹ä¸º â€œHello, World!â€ã€‚</p>
<p>å‚è€ƒä»£ç å¦‚ä¸‹</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Hello</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Hello, World!<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>ç„¶åæˆ‘ä»¬åœ¨ App() ç»„ä»¶ä¸­å°†å…¶å®ä¾‹åŒ–ã€‚</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;App&quot;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Hello</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Hello</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  );<br>&#125;<br></code></pre></td></tr></table></figure>
<p>æ¸²æŸ“æ•ˆæœå¦‚å›¾</p>
<figure>
<img src="https://cdn.jsdelivr.net/gh/OOJ2003/blog-img/data/%E7%AE%80%E5%8D%95%E7%BB%84%E4%BB%B6.png" srcset="/img/loading.gif" lazyload alt="ç®€å•ç»„ä»¶" /><figcaption aria-hidden="true">ç®€å•ç»„ä»¶</figcaption>
</figure>
<p>è¿™é‡Œæœ‰ä¸ªæœ‰è¶£çš„åœ°æ–¹ï¼Œå½“æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªç»„ä»¶å¹¶æƒ³è¦åœ¨å…¶ä»–åœ°æ–¹çš„ jsx é‡Œé¢ä½¿ç”¨çš„æ—¶å€™ï¼Œæ—¢å¯ä»¥å†™æˆè‡ªé—­åˆæ ‡ç­¾ï¼Œä¹Ÿå¯ä»¥å†™æˆæ™®é€šçš„æ ‡ç­¾ã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œæ—¢å¯ä»¥å†™æˆ &lt;Hello&gt;&lt;/Hello&gt;, ä¹Ÿå¯ä»¥å†™æˆ &lt;Hello/&gt; ã€‚</p>
<h3 id="ç»„ä»¶ä¼ å‚é¡ºå¸¦æ¸²æŸ“ç‚¹åˆ«çš„">ç»„ä»¶ä¼ å‚ï¼Œé¡ºå¸¦æ¸²æŸ“ç‚¹åˆ«çš„</h3>
<p>ä¸€ä¸ªåªèƒ½æ¸²æŸ“ "Hello, World!" çš„ç»„ä»¶æ˜¯æ²¡æœ‰å‰é€”çš„ã€‚è‡³å°‘å¾—è®©ä»–æ¸²æŸ“ç‚¹åˆ«çš„ï¼Œè‡³å°‘å¾—è®©ä»–æ ¹æ®æˆ‘ä»¬ä¼ å…¥çš„å‚æ•°æ¸²æŸ“ç‚¹ä»€ä¹ˆå‡ºæ¥ã€‚</p>
<p>è¿™é‡Œæ•´ä¸ªç®€å•çš„ä¾‹å­ï¼Œå°±è®©æˆ‘ä»¬çš„ç»„ä»¶æ¸²æŸ“ä¸€æ®µæ ¹æ®å‚æ•°æ‹¼æ¥çš„æ–‡å­—ï¼Œå°±åœ¨ä¼ å…¥çš„å‚æ•°ï¼ˆå­—ç¬¦ä¸²ï¼‰å°¾éƒ¨åŠ ä¸Š â€œï¼Œæˆ‘å¥½å–œæ¬¢ä½ å•Šâ€ï¼Œæ¯”å¦‚ç»™æˆ‘ä»¬çš„ &lt;Love/&gt; ç»„ä»¶ä¼ å…¥ä¸€ä¸ªå‚æ•° â€œå˜‰ç„¶â€ ï¼Œå°±ä¼šæ¸²æŸ“æˆ â€œå˜‰ç„¶ï¼Œæˆ‘å¥½å–œæ¬¢ä½ å•Šâ€ã€‚</p>
<p>å‚è€ƒå®Œæ•´ä»£ç å¦‚ä¸‹ã€‚</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;App&quot;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Love</span> <span class="hljs-attr">love</span>=<span class="hljs-string">&#123;</span>&quot;<span class="hljs-attr">å˜‰ç„¶</span>&quot;&#125; /&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Love</span>(<span class="hljs-params">props</span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>&#123;props.love + &quot;,æˆ‘å¥½å–œæ¬¢ä½ å•Š&quot;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span>;<br></code></pre></td></tr></table></figure>
<h4 id="è¡¨è¾¾å¼è¯­æ³•">è¡¨è¾¾å¼è¯­æ³•</h4>
<p>è¿™é‡Œåˆå¼•å…¥äº†å‡ ä¸ªæ–°è¯­æ³•ï¼Œæ¯”å¦‚è¿™ä¸ªå¤§æ‹¬å·ï¼Œçœ‹èµ·æ¥å¾ˆå¥‡æ€ªè¿˜æ˜¾å¾—å¾ˆå¤šä½™ï¼Œéš¾é“å°±ä¸èƒ½æŠŠå®ƒçœç•¥æ‰å—ï¼Ÿ</p>
<p>äº‹å®ä¸Šï¼Œè¿™é‡Œçš„å¤§æ‹¬å·è¡¨ç¤ºçš„æ˜¯è¡¨è¾¾å¼çš„æ„æ€ï¼Œå¤§æ‹¬å·æ¡†ä½çš„å†…å®¹æ˜¯ä¸€ä¸ªéœ€è¦è®¡ç®—çš„è¡¨è¾¾å¼ï¼Œå¦‚æœçœç•¥æ‰å¤§æ‹¬å·ï¼Œdiv æ ‡ç­¾å†…çš„å†…å®¹åˆ™ä¼šç›´æ¥è¢«è½¬ä¹‰æˆå­—ç¬¦ä¸²ã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¯´å¦‚æœæˆ‘ä»¬å†™æˆä¸‹é¢çš„å½¢å¼ï¼Œæ¸²æŸ“çš„å†…å®¹å°±æ ¹æœ¬ä¸ä¼šæ˜¯æˆ‘ä»¬æƒ³è¦çš„ã€‚</p>
<figure>
<img src="https://cdn.jsdelivr.net/gh/OOJ2003/blog-img/data/%E9%94%99%E8%AF%AF%E7%9A%84%E6%B8%B2%E6%9F%93.png" srcset="/img/loading.gif" lazyload alt="é”™è¯¯çš„æ¸²æŸ“" /><figcaption aria-hidden="true">é”™è¯¯çš„æ¸²æŸ“</figcaption>
</figure>
<p>...å°±åƒå›¾ç‰‡é‡Œæ¼”ç¤ºçš„é‚£æ ·ã€‚</p>
<p>åŠ ä¸Šå¤§æ‹¬å·åï¼Œç»“æœå°±æ­£å¸¸äº†ï¼Œæˆ‘ä»¬ç”šè‡³è¿˜èƒ½å¤šæ•´å‡ è¡Œã€‚</p>
<figure>
<img src="https://cdn.jsdelivr.net/gh/OOJ2003/blog-img/data/%E6%AD%A3%E7%A1%AE%E7%9A%84%E6%B8%B2%E6%9F%93.png" srcset="/img/loading.gif" lazyload alt="æ­£ç¡®çš„æ¸²æŸ“" /><figcaption aria-hidden="true">æ­£ç¡®çš„æ¸²æŸ“</figcaption>
</figure>
<h4 id="props">props</h4>
<p>å¦ä¸€ä¸ªå¥‡æ€ªçš„è¯­æ³•æ˜¯è¿™ä¸ª props ï¼Œå¾ˆæ˜¾ç„¶æˆ‘ä»¬çš„å‚æ•°ä¼ é€’éƒ½æ˜¯é€šè¿‡ props å®ç°çš„ã€‚è¿™ä¸ªè¯æ˜¯ properties çš„ç¼©å†™ï¼Œæ„æ€å°±æ˜¯å±æ€§ï¼Œæ€ä¹ˆæ„Ÿè§‰è¯´äº†å’Œæ²¡è¯´çš„ä¸€æ ·ã€‚ã€‚</p>
<p>åœ¨ jsx ä¸­å†™æ ‡ç­¾æ—¶ï¼Œæˆ‘ä»¬å¾€é‡Œé¢ä¼ å…¥çš„å‚æ•°åˆ™ä¼šè¢«åŒ…è£…æˆä¸€ä¸ª js å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯ props ï¼Œæ‰€ä»¥åœ¨ç»„ä»¶å‡½æ•°ä¸­æƒ³è¦ä½¿ç”¨å¤–ç•Œä¼ å…¥çš„å‚æ•°æ—¶ï¼Œåªè¦ä½¿ç”¨ props é‡Œçš„å‚æ•°å³å¯ã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœè¦ä¼ é€’ä¸å¯å˜çš„å‚æ•°ç»™ç»„ä»¶ï¼Œåœ¨ jsx é‡Œé¢å†™æ ‡ç­¾çš„æ—¶å€™åœ¨æ ‡ç­¾é‡Œå†™ä¸Š " å‚æ•°å={å‚æ•°å€¼} " å°±å¯ä»¥äº†ï¼Œä½¿ç”¨æ—¶ç”¨ " props.å‚æ•°å " å³å¯è®¿é—®åˆ°æ‰€éœ€è¦çš„å‚æ•°ã€‚</p>
<p>è‡³äºä¸ºä»€ä¹ˆæ˜¯ä¸å¯å˜çš„å‚æ•°ï¼Œè¿™æ˜¯ä¸ªå¤§å‘ï¼Œä¹‹ååˆ°ç±»ç»„ä»¶å’Œ hocks çš„æ—¶å€™å†ç»†èŠã€‚</p>
<p>è¿™ç§å†™æ³•çœ‹èµ·æ¥æŒºé…·ç‚«çš„ï¼Œä½†æ˜¯æï¼Œå½“ç»„ä»¶éœ€è¦çš„å‚æ•°å˜çš„å¤šèµ·æ¥ä¸”å‚æ•°åç§°å˜çš„è¶Šæ¥è¶Šé•¿çš„æ—¶å€™å°±æœ‰ç‚¹è›‹ç–¼äº†ï¼Œå› ä¸ºæ†¨æ†¨çš„ç¼–è¾‘å™¨å‹æ ¹ä¸æç¤ºï¼è€Œä¸”å¦‚æœå†™äº†é”™è¯¯çš„å‚æ•°åç§°ï¼Œä¹Ÿä¸ä¼šæŠ¥é”™ï¼Œå®é™…æ¸²æŸ“æ—¶å€™é‚£ä¸ª prop çš„å€¼åˆ™ä¼šå˜æˆ undefined ã€‚è¿™æŒºè ¢çš„ã€‚ã€‚å› ä¸ºè¿™ç§é”™è¯¯ä¸å¿…è¦éå¾—åœ¨è¿è¡Œæ—¶æ‰èƒ½å‘ç°ã€‚è‡³äºè§£å†³æ–¹å¼ï¼Œåé¢æˆ‘ä»¬åœ¨æŠŠ react åŸºç¡€çš„ä¸€äº›ç©æ„å„¿æå®šåå°±ä¼šä»‹ç»ä¸€ä¸ªå±Œç‚¸å¤©çš„æ–°ç©æ„å„¿ï¼Œtypescriptï¼Œé€šè¿‡ç±»å‹çº¦æŸå°±å¯ä»¥å¾ˆå¥½çš„è§£å†³è¿™ç§é—®é¢˜ï¼Œç”šè‡³ç¼–è¾‘å™¨çš„æç¤ºä¹Ÿæ›´æœ‰åŠ²äº†ï¼Œè‡ªåŠ¨è¡¥å…¨ä¸€å£æ°”èƒ½ä¸Šä¸‰æ¥¼äº†ã€‚</p>
<h4 id="è§£æ„èµ‹å€¼è¯­æ³•">è§£æ„èµ‹å€¼è¯­æ³•</h4>
<p>å¯æ˜¯ç°åœ¨å­¦ ts è¿˜æ˜¯æœ‰ç‚¹å¤ªè¿œäº†ï¼Œæ‰€ä»¥è¿™é‡Œæœ‰ä¸€ç§ç®€å•çš„æŠ€å·§ä¹Ÿå¯ä»¥è®©ç¼–è¾‘å™¨æä¾›æ›´å¥½çš„è‡ªåŠ¨è¡¥å…¨ï¼Œå³ä½¿ç”¨ es6 ä¸­æ–°å¢åŠ çš„<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment">è§£æ„èµ‹å€¼è¯­æ³•</a>ã€‚</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;App&quot;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">ABC</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&#123;</span>&quot;<span class="hljs-attr">æˆ‘</span>&quot;&#125; <span class="hljs-attr">birthday</span>=<span class="hljs-string">&#123;</span>&quot;<span class="hljs-attr">æˆ‘çš„ç”Ÿæ—¥</span>&quot;&#125; /&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">ABC</span>(<span class="hljs-params">&#123; name, birthday &#125;</span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>&#123;name + &quot;çš„ç”Ÿæ—¥æ˜¯&quot; + birthday&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span>;<br></code></pre></td></tr></table></figure>
<figure>
<img src="https://cdn.jsdelivr.net/gh/OOJ2003/blog-img/data/%E8%A7%A3%E6%9E%84%E8%B5%8B%E5%80%BC.png" srcset="/img/loading.gif" lazyload alt="è§£æ„èµ‹å€¼" /><figcaption aria-hidden="true">è§£æ„èµ‹å€¼</figcaption>
</figure>
<p>è™½ç„¶æ˜¯ä¸€æ®µåºŸè¯ä»£ç ï¼Œä½†æ˜¯è¿™ä¸ªæŠ€å·§ç¡®å®è¿˜ä¸é”™ã€‚</p>
<h3 id="æ¡ä»¶æ¸²æŸ“">æ¡ä»¶æ¸²æŸ“</h3>
<p>åœ¨ä½¿ç”¨ç»„ä»¶æ—¶ç»å¸¸ä¼šéœ€è¦æ ¹æ®æŒ‡å®šçš„æ¡ä»¶æ¥æ¸²æŸ“ç‰¹å®šç»„ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¼šå¸Œæœ›åœ¨åœ¨æ¸²æŸ“æ—¶å¢åŠ ä¸€äº›åˆ¤æ–­é€»è¾‘ã€‚</p>
<h4 id="åŒ…è£…ç»„ä»¶å’Œåˆ¤æ–­é€»è¾‘">åŒ…è£…ç»„ä»¶å’Œåˆ¤æ–­é€»è¾‘</h4>
<p>ç”±äº jsx é‡Œé¢åªèƒ½æ’å…¥è¡¨è¾¾å¼ï¼Œæ‰€ä»¥ç›´æ¥å†™åˆ¤æ–­æ˜¯ä¸è¡Œçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å°†åˆ¤æ–­è¯­å¥å’Œæƒ³è¦åˆ†åˆ«å±•ç¤ºçš„ç»„ä»¶æ”¾ç½®åˆ°ä¸€ä¸ªæ–°ç»„ä»¶ä¸­æ¥å¤„ç†ã€‚</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;App&quot;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">M1</span> <span class="hljs-attr">choice</span>=<span class="hljs-string">&#123;true&#125;</span> /&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">M1</span> <span class="hljs-attr">choice</span>=<span class="hljs-string">&#123;false&#125;</span> /&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">M1</span>(<span class="hljs-params">props</span>) &#123;<br>  <span class="hljs-keyword">if</span> (props.<span class="hljs-property">choice</span> === <span class="hljs-literal">true</span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;<br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span>;<br></code></pre></td></tr></table></figure>
<p><img src="https://cdn.jsdelivr.net/gh/OOJ2003/blog-img/data/2022/08/01/20220801-155315.png" srcset="/img/loading.gif" lazyload /></p>
<h4 id="ä¸‰ç›®è¿ç®—ç¬¦">ä¸‰ç›®è¿ç®—ç¬¦</h4>
<p>åŒ…è£…æˆå¦ä¸€ä¸ªç»„ä»¶åœ¨å¤„ç†å¤æ‚é€»è¾‘æ—¶å¾ˆæœ‰ç”¨çš„ï¼Œä½†æ˜¯ç»å¤§å¤šæ•°æƒ…å†µä¸‹æˆ‘ä»¬å¯èƒ½åªæ˜¯éœ€è¦ä¸€ä¸ªäºŒé€‰ä¸€çš„åˆ¤æ–­ï¼Œ A æˆ– Bï¼Œæ¸²æŸ“æˆ–ä¸æ¸²æŸ“ï¼Œè¿™ç§æƒ…å†µä¸‹ä¸‰ç›®è¿ç®—ç¬¦å°±æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> flag = <span class="hljs-literal">true</span>;<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;App&quot;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>&#123;flag ? <span class="hljs-tag">&lt;<span class="hljs-name">What</span> <span class="hljs-attr">what</span>=<span class="hljs-string">&#123;</span>&quot;???&quot;&#125; /&gt;</span> : null&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>&#123;flag ? null : <span class="hljs-tag">&lt;<span class="hljs-name">What</span> <span class="hljs-attr">what</span>=<span class="hljs-string">&#123;</span>&quot;<span class="hljs-attr">not</span> <span class="hljs-attr">empty</span>&quot;&#125; /&gt;</span>&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>&#123;!flag ? <span class="hljs-tag">&lt;<span class="hljs-name">What</span> <span class="hljs-attr">what</span>=<span class="hljs-string">&#123;</span>&quot;<span class="hljs-attr">false</span>&quot;&#125; /&gt;</span> : <span class="hljs-tag">&lt;<span class="hljs-name">What</span> <span class="hljs-attr">what</span>=<span class="hljs-string">&#123;</span>&quot;<span class="hljs-attr">true</span>&quot;&#125; /&gt;</span>&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">What</span>(<span class="hljs-params">props</span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>&#123;props.what&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span>;<br></code></pre></td></tr></table></figure>
<p><img src="https://cdn.jsdelivr.net/gh/OOJ2003/blog-img/data/2022/08/01/20220801-170359.png" srcset="/img/loading.gif" lazyload /></p>
<p>å°±åƒä»£ç é‡Œé¢æ¼”ç¤ºçš„é‚£æ ·ï¼Œå½“æˆ‘ä»¬é‡åˆ°æ¸²æŸ“ã€ä¸æ¸²æŸ“äºŒé€‰ä¸€è¿™ç§é€»è¾‘æ—¶ï¼Œç›´æ¥åœ¨ä¸æ¸²æŸ“æ—¶è¿”å› null å³å¯ã€‚</p>
<h3 id="å¤„ç†åˆ—è¡¨">å¤„ç†åˆ—è¡¨</h3>
<p>åœ¨é¡µé¢çš„æ„å»ºä¸­ï¼Œä¸€ç§å¾ˆå¸¸è§çš„å†™æ³•æ˜¯å°† js ä¸­çš„åˆ—è¡¨æˆ–è€…å…¶ä»–å¯è¿­ä»£çš„ç»“æ„è½¬æ¢æˆå¯¹åº”çš„ç»„ä»¶ç»“æ„ã€‚æ¯”å¦‚è¯´å°†åç«¯è¿”å›çš„ä¸€ç»„æ–‡ç« æè¦è½¬æ¢ä¸º dom æ ‘ä¸Šçš„ä¸€ä¸ªæ— åºåˆ—è¡¨ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥å¤„ç†è¿™ç§æƒ…å½¢ã€‚</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> data = [<br>    &#123;<br>      <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;å­¦ç”Ÿ&quot;</span>,<br>      <span class="hljs-attr">year</span>: <span class="hljs-number">24</span>,<br>    &#125;,<br>    &#123;<br>      <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;æç”°æ‰€&quot;</span>,<br>      <span class="hljs-attr">year</span>: <span class="hljs-number">19.19</span>,<br>    &#125;,<br>    &#123;<br>      <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;é‡å…½&quot;</span>,<br>      <span class="hljs-attr">year</span>: <span class="hljs-number">8.1</span>,<br>    &#125;,<br>  ];<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;App&quot;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span></span><br><span class="language-xml">        &#123;data.map((i) =&gt; (</span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">Item</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&#123;i.year.toString()&#125;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&#123;i.name&#125;</span> <span class="hljs-attr">year</span>=<span class="hljs-string">&#123;i.year&#125;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Item</span>&gt;</span></span><br><span class="language-xml">        ))&#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Item</span>(<span class="hljs-params">props</span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>name: &#123;props.name&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>year: &#123;props.year&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span>;<br></code></pre></td></tr></table></figure>
<p><img src="https://cdn.jsdelivr.net/gh/OOJ2003/blog-img@main/blog-images/2022/08/12/eb6ed08d524b46a14d80c5737468a3b2-image-20220812072335406-d7534f.png" srcset="/img/loading.gif" lazyload /></p>
<p>è™½ç„¶ç»“æœæ˜¯å·®ä¸å¤šçš„ï¼Œä½†æ˜¯æ§åˆ¶å°å´æœ‰ä¸ªè­¦å‘Šï¼Œ</p>
<p>è¿™é‡Œçš„è­¦å‘Šè¯´çš„æ˜¯åˆ—è¡¨çš„æ¯ä¸€ä¸ªå­å…ƒç´ éƒ½éœ€è¦æœ‰ä¸€ä¸ª "key" å±æ€§ã€‚</p>
<p>åŸå› è§£é‡Šèµ·æ¥æ¯”è¾ƒå¤æ‚ï¼Œæ·±å…¥äº†è§£çš„è¯éœ€è¦å¯¹ vdom å’Œ dif ç®—æ³•æœ‰ä¸€å®šè®¤è¯†ï¼Œç®€å•æ¦‚æ‹¬å°±æ˜¯æ—  key æ—¶ä½¿ç”¨çš„ dif ç®—æ³•æ¯”æœ‰ key æ—¶çš„æ›´åŠ æ²¡æœ‰æ•ˆç‡ã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬åœ¨ App() é‡Œè¡¥å……ä¸Š keyï¼Œè¿™é‡Œæˆ‘ä»¬å°±å°† key è®¾ç½®ä¸ºåˆ—è¡¨å…ƒç´ çš„ .year å±æ€§ã€‚</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> data = [<br>    &#123;<br>      <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;å­¦ç”Ÿ&quot;</span>,<br>      <span class="hljs-attr">year</span>: <span class="hljs-number">24</span>,<br>    &#125;,<br>    &#123;<br>      <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;æç”°æ‰€&quot;</span>,<br>      <span class="hljs-attr">year</span>: <span class="hljs-number">19.19</span>,<br>    &#125;,<br>    &#123;<br>      <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;é‡å…½&quot;</span>,<br>      <span class="hljs-attr">year</span>: <span class="hljs-number">8.1</span>,<br>    &#125;,<br>  ];<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;App&quot;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span></span><br><span class="language-xml">        &#123;data.map((i) =&gt; (</span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">Item</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&#123;i.year.toString()&#125;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&#123;i.name&#125;</span> <span class="hljs-attr">year</span>=<span class="hljs-string">&#123;i.year&#125;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Item</span>&gt;</span></span><br><span class="language-xml">        ))&#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  );<br>&#125;<br></code></pre></td></tr></table></figure>
<p>å¦å¤–ä¸€ç‚¹å€¼å¾—æ³¨æ„çš„ï¼Œè¿™é‡Œçš„ key å±æ€§åªåŠ åœ¨ç»„ä»¶è¢«è°ƒç”¨æ—¶ï¼Œä¹Ÿå°±æ˜¯è¿™é‡Œçš„ App() ç»„ä»¶ï¼Œè€Œä¸æ˜¯ç›´æ¥åŠ åœ¨ Item() é‡Œé¢ã€‚</p>
<h2 id="ç®¡ç†å†…éƒ¨æ•°æ®">ç®¡ç†å†…éƒ¨æ•°æ®</h2>
<p>åœ¨ä¸Šä¸ªç« èŠ‚ä¸­æˆ‘ä»¬ä½¿ç”¨çš„éƒ½æ˜¯æ— å†…éƒ¨çŠ¶æ€çš„çš„ç»„ä»¶ï¼Œç»„ä»¶æ— æ³•ä¿å­˜æ•°æ®è€Œæ˜¯æ ¹æ®å¤–éƒ¨çš„æ•°æ®æºæ¸²æŸ“ï¼Œåœ¨è¿™ä¸ªç« èŠ‚ä¸­æˆ‘ä»¬å°†ä¼šæ›´è¿›ä¸€æ­¥çš„ç ”ç©¶è®¨è®ºå¦‚ä½•åœ¨ç»„ä»¶ä¸­ä¿å­˜çŠ¶æ€ã€‚</p>
<h3 id="ç±»ç»„ä»¶å’Œç”Ÿå‘½å‘¨æœŸæ–¹æ³•">ç±»ç»„ä»¶å’Œç”Ÿå‘½å‘¨æœŸæ–¹æ³•</h3>
<p>åœ¨é¢å‘å¯¹è±¡ä¸­ï¼Œé‡åˆ°è¿™ç§éœ€è¦å†…éƒ¨æ•°æ®çš„æƒ…å½¢æ—¶ï¼Œä¸€èˆ¬éƒ½æ˜¯å°†æ•°æ®ç»“æ„å’Œå…¶ä»–å‡½æ•°å°è£…æˆä¸€ä¸ªç±»ï¼Œä½¿ç”¨æ—¶åªéœ€å®ä¾‹åŒ–å¯¹è±¡å³å¯ã€‚å¾—ç›Šäº es6 å¼•å…¥çš„ç±»è¯­æ³•ï¼Œreact ä¸­ä¹Ÿå¯ä»¥å®ç°ç±»ä¼¼çš„æ“ä½œã€‚</p>
<p>è¿™é‡Œä½œä¸ºç¤ºä¾‹ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªç®€å•çš„è®¡æ—¶å™¨ï¼Œç”¨äºæ¼”ç¤ºç±»ç»„ä»¶çš„ä½¿ç”¨æ–¹æ³•ï¼Œä»¥ä¸‹ä¸º App.jsx çš„å†…å®¹ã€‚</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Clock</span> /&gt;</span></span>;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Clock</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> &#123;<br>  state = &#123; <span class="hljs-attr">date</span>: <span class="hljs-literal">null</span>, <span class="hljs-attr">timer</span>: <span class="hljs-literal">null</span> &#125;;<br><br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">props</span>) &#123;<br>    <span class="hljs-variable language_">super</span>(props);<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = &#123; <span class="hljs-attr">date</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>() &#125;;<br>  &#125;<br><br>  <span class="hljs-title function_">componentDidMount</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">timer</span> = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">tick</span>(), <span class="hljs-number">1000</span>);<br>  &#125;<br><br>  <span class="hljs-title function_">componentWillUnmount</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-built_in">clearInterval</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">timer</span>);<br>  &#125;<br><br>  <span class="hljs-title function_">tick</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(&#123;<br>      <span class="hljs-attr">date</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(),<br>    &#125;);<br>  &#125;<br><br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hello, world!<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>It is &#123;this.state.date.toLocaleTimeString()&#125;.<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    );<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span>;<br></code></pre></td></tr></table></figure>
<p>æ³¨æ„æˆ‘ä»¬åˆ›å»ºçš„ç±»ç»„ä»¶éœ€è¦ç»§æ‰¿ React.Component ,æ‰€ä»¥éœ€è¦é¢„å…ˆ import ä¸€ä¸‹ã€‚</p>
<p>é¦–å…ˆæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç»§æ‰¿è‡ª React.Component çš„ç©ºç»„ä»¶ã€‚å¹¶æ·»åŠ  constructor æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šè°ƒç”¨ super(props) è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ã€‚</p>
<p>ç„¶åä¸ºæˆ‘ä»¬çš„ç±»æ·»åŠ åˆå§‹åŒ–çš„å†…éƒ¨çŠ¶æ€ï¼Œå³ state ï¼Œæ³¨æ„è¿™ä¸€æ­¥å¹¶ä¸æ˜¯å¿…éœ€çš„ï¼Œè¿™æ ·åšçš„ç›®çš„ä¸»è¦æ˜¯ä¸ºäº†æ–¹ä¾¿é˜…è¯»ä¸å¢å¼ºç¼–è¾‘å™¨çš„æç¤ºèƒ½åŠ›ã€‚</p>
<p>æ¥ä¸‹æ¥åˆ›å»ºä¸€ä¸ª render æ–¹æ³•ï¼Œè¿™ä¸ªå‡½æ•°ä¼šè¿”å›ä¸€æ®µ jsx è¡¨è¾¾å¼ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ä¹‹å‰åœ¨å‡½æ•°å¼ç»„ä»¶ä¸­å†™çš„è¿”å›å€¼ã€‚</p>
<p>ç„¶åæˆ‘ä»¬åˆ›å»º tick æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šæ›´æ–° state ä¸­çš„å­—æ®µã€‚</p>
<p>è¿™é‡Œå°±ç¢°åˆ°äº† react ä¸­æ¯”è¾ƒå¥‡æ€ªçš„ä¸€ä¸ªç‰¹æ€§ï¼Œå³<strong>ä¸å˜æ€§</strong>ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬è¿™é‡Œå¹¶ä¸èƒ½ç›´æ¥ä¿®æ”¹ state ä¸­çš„ date å±æ€§ï¼Œè€Œæ˜¯å¾—ä½¿ç”¨ setState æ–¹æ³•é‡æ–°ç»™ state èµ‹å€¼ï¼ŒsetState æ–¹æ³•åˆ™åªä¼šåŸºäºæˆ‘ä»¬ä¼ å…¥çš„å¯¹è±¡çš„å­—æ®µå»æ›´æ–° stateï¼Œstate çš„å…¶ä½™å­—æ®µåˆ™ä¼šä¸åŸå…ˆä¸€è‡´ã€‚</p>
<p>ç”±äºæˆ‘ä»¬å¸Œæœ›ç»„ä»¶åœ¨è¢«åˆ›å»ºåæ¯ç§’éƒ½è°ƒç”¨ä¸€æ¬¡ tick æ–¹æ³•ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œç”Ÿå‘½å‘¨æœŸæ–¹æ³•æŒ‡çš„æ˜¯åœ¨ç»„ä»¶æŒ‚è½½ã€æ›´æ–°ã€é”€æ¯æ—¶ä¼šè°ƒç”¨çš„æ–¹æ³•ã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬åœ¨ componentDidMoun æ–¹æ³•ä¸­é€šè¿‡ <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/setInterval">setInterval</a> å‡½æ•°æ¯éš”ä¸€ç§’å°±è°ƒç”¨ä¸€æ¬¡ tick æ–¹æ³•ï¼Œæ³¨æ„åœ¨ç»„ä»¶é”€æ¯æ—¶æ¸…é™¤æ‰ setInterval è¿”å›çš„ interval ID ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨ componentWillUnmount æ–¹æ³•ä¸­è°ƒç”¨ clearInterval å‡½æ•°æ¸…é™¤æ‰ interval IDã€‚</p>
<p>é™¤äº†æˆ‘ä»¬åˆšæ‰ä»‹ç»çš„ä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œå…¶å®è¿˜æœ‰ä¸€äº›å…¶ä»–çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œå…³äºå®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•å’Œç”Ÿå‘½å‘¨æœŸå‡½æ•°çš„æ‰§è¡Œé¡ºåºï¼Œå¯ä»¥å‚è€ƒ<a target="_blank" rel="noopener" href="https://zh-hans.reactjs.org/docs/react-component.html">è¿™ç¯‡</a>æ–‡æ¡£ã€‚</p>
<p>å¬ç€è²Œä¼¼æŒºä¹±çš„ã€‚ã€‚ã€‚äº‹å®ä¹Ÿç¡®å®å¦‚æ­¤ï¼Œç›¸è¾ƒäºå‡½æ•°ç»„ä»¶çš„ç®€æ´å½¢å¼ï¼Œç±»ç»„ä»¶æ˜æ˜¾è¦æ›´å¤æ‚äº›ï¼Œä½†æ˜¯æœ‰æ²¡æœ‰ä¸€ç§æ›´åŠ ä¼˜é›…çš„æ–¹æ³•å‘¢ï¼Ÿå½“ç„¶æ˜¯æ˜¯æœ‰çš„ï¼åœ¨åå‡ ç« æˆ‘ä»¬ä¼šæ¥è§¦åˆ°å¦‚ä½•åœ¨å‡½æ•°ç»„ä»¶ä¸­ä½¿ç”¨ hocks ç®¡ç†å†…éƒ¨æ•°æ®ã€‚</p>
<h3 id="å›è°ƒå‡½æ•°ä¸-react-äº‹ä»¶å¤„ç†">å›è°ƒå‡½æ•°ä¸ React äº‹ä»¶å¤„ç†</h3>
<p>ä¸ä¼šå“åº”ç”¨æˆ·äº¤äº’çš„ç»„ä»¶æ˜¯æ²¡æœ‰å‰é€”çš„ï¼åœ¨è¿™ä¸ªå°èŠ‚æˆ‘ä»¬å°†ä¼šä»‹ç»åœ¨ç»„ä»¶ä¸­å¦‚ä½•ä½¿ç”¨å›è°ƒå‡½æ•°æ›´æ–° state ï¼Œå¹¶å­¦ä¹ ä½¿ç”¨ react ä¸­çš„äº‹ä»¶å¤„ç†å‡½æ•°ã€‚</p>
<h4 id="å›è°ƒå‡½æ•°å’Œè›‹ç–¼çš„-this">å›è°ƒå‡½æ•°å’Œè›‹ç–¼çš„ this</h4>
<p><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Callback_(computer_programming)">å›è°ƒå‡½æ•°</a>ï¼Œä¸€ç§éå¸¸å¸¸è§çš„è®¾è®¡æ¨¡å¼ï¼Œåœ¨ä½¿ç”¨ react ç»„ä»¶æ—¶ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬ä¼šå¸Œæœ›æŸäº›ç»„ä»¶æ¥å—ä¸€ä¸ªå‡½æ•°å¹¶åœ¨é€‚æ—¶çš„æ—¶å€™è°ƒç”¨ï¼Œè¿™æ—¶å€™å°±æ˜¯å›è°ƒæ“ä½œå¤§å±•èº«æ‰‹çš„æœºä¼šã€‚æ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä¾‹å­æ€ä¹ˆä½¿ç”¨å›è°ƒåˆ›å»ºä¸€ä¸ªè®¡æ•°å™¨çš„æ¡†æ¶ã€‚</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Counter</span> /&gt;</span></span>;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Counter</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> &#123;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">props</span>) &#123;<br>    <span class="hljs-variable language_">super</span>(props);<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = &#123; <span class="hljs-attr">count</span>: <span class="hljs-number">0</span> &#125;;<br>  &#125;<br><br>  <span class="hljs-title function_">add</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(&#123; <span class="hljs-attr">count</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">count</span> + <span class="hljs-number">1</span> &#125;);<br>  &#125;<br><br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Count: &#123;this.state.count&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> this.add()&#125;&gt;+1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/&gt;</span></span><br>    );<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span>;<br></code></pre></td></tr></table></figure>
<p>å¥½å§ã€‚è¿™ä¸ªä¾‹å­å¯èƒ½æœ‰äº›å‰§é€ï¼Œæ¯”å¦‚ props é‡Œé¢é‚£ä¸ªå¥‡æ€ªçš„ onClick ï¼Œæ€»ä¹‹å…ˆçŸ¥é“è¿™ä¸ª onClick ä¼šåœ¨ç»„ä»¶è¢«ç‚¹å‡»æ—¶è°ƒç”¨ä¼ å…¥çš„å‡½æ•°å°±è¡Œäº†ã€‚</p>
<p>æˆ‘ä»¬æ¥çœ‹ä»£ç é‡Œé¢çš„å…¶ä»–éƒ¨åˆ†ï¼Œå’Œåœ¨ä¸Šä¸€èŠ‚é‡Œé¢ä»‹ç»çš„ç±»ç»„ä»¶ä¸€æ ·ï¼Œæˆ‘ä»¬åŒæ ·ä¸ºå…¶æä¾›äº† constructor å’Œ render å‡½æ•°ï¼Œç„¶åå®šä¹‰ä¸€ä¸ª add å‡½æ•°ç”¨äºæ›´æ–° stateï¼Œç„¶åä¼ é€’ä¸€ä¸ªå¥‡æ€ªçš„ç®­å¤´å‡½æ•°ç»™ onClick åšå›è°ƒï¼Œå½“æŒ‰é’®è¢«ç‚¹å‡»æ—¶å³ä¼šè§¦å‘ã€‚</p>
<p>è¿™é‡Œçš„å†™æ³•å…¶å®å¾ˆå¥‡æ€ªï¼Œä¸ºä»€ä¹ˆä¸ç›´æ¥ä¼ å‡½æ•°åè€Œæ˜¯ä¼ é€’ä¸€ä¸ªç®­å¤´å‡½æ•°å‘¢ï¼Ÿè¿™é‡Œå°±æ˜¯ js å±å±±ç‰¹æ€§çš„ä¸€ä¸ªè›‹ç–¼é—®é¢˜ï¼Œè‡­åæ˜­è‘—çš„ this ç»‘å®šé—®é¢˜ã€‚å…·ä½“å†…å®¹å¯ä»¥å‚è€ƒ mdn çš„<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/this">è¿™ç¯‡æ–‡ç« </a>ä»¥åŠ react æ–‡æ¡£ä¸­å…³äº jsx ç¼–è¯‘ä¸º js ä»£ç çš„å†…å®¹ã€‚</p>
<p>å¦‚æœæˆ‘ä»¬å†™æˆå¦‚ä¸‹å†™æ³•</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-title function_">add</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Clicked!&quot;</span>);<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;this =&quot;</span>);<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>);<br>  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(&#123; <span class="hljs-attr">count</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">count</span> + <span class="hljs-number">1</span> &#125;);<br>&#125;<br><br><span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Count: &#123;this.state.count&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;this.add&#125;</span>&gt;</span>+1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/&gt;</span></span><br>  );<br>&#125;<br></code></pre></td></tr></table></figure>
<p>åœ¨ç‚¹å‡»æŒ‰é’®å</p>
<p><img src="https://cdn.jsdelivr.net/gh/OOJ2003/blog-img@main/blog-images/2022/08/24/5a0bd68c5f9bc0628b79fcebd6a1edd6-image-20220824083527832-b63c32.png" srcset="/img/loading.gif" lazyload /></p>
<p>å°±ä¼šå‘ç° add å‡½æ•°çš„ this ç»‘å®šåˆ°äº† undefined ä¸Šï¼Œä¹Ÿå°±ä¸å¯èƒ½æ›´æ–° state å†…å®¹äº†ã€‚</p>
<p>è€Œ<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Functions/Arrow_functions">ç®­å¤´å‡½æ•°</a>å¹¶æ²¡æœ‰è‡ªå·±çš„ thisï¼Œæ‰€ä»¥ä¼ é€’ç®­å¤´å‡½æ•°ç»™ onClick çš„æ—¶å€™, add çš„ this åˆ™å°±å¤„äºæ­£ç¡®çš„ä¸Šä¸‹æ–‡ç¯å¢ƒä¸­äº†ã€‚</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Count: &#123;this.state.count&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> this.add()&#125;&gt;+1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/&gt;</span></span><br>  );<br>&#125;<br></code></pre></td></tr></table></figure>
<p><img src="https://cdn.jsdelivr.net/gh/OOJ2003/blog-img@main/blog-images/2022/08/24/f90b05f272cef28645af7b01596e9826-image-20220824084639323-41c83d.png" srcset="/img/loading.gif" lazyload /></p>
<h4 id="èŒ´å­—çš„å››ç§å†™æ³•">èŒ´å­—çš„å››ç§å†™æ³•</h4>
<p>å…¶å®é™¤äº†ä¸Šè¿°ç›´æ¥ä¼ é€’ç®­å¤´å‡½æ•°çš„å†™æ³•å¤–ï¼Œè¿˜æœ‰å‡ ç§å…¶ä»–çš„å†™æ³•ã€‚</p>
<h5 id="å…¬æœ‰ç±»å­—æ®µç»‘å®šç®­å¤´å‡½æ•°ä¼ å‚æä¾›å­—æ®µåç§°æ¨è">1.å…¬æœ‰ç±»å­—æ®µç»‘å®šç®­å¤´å‡½æ•°ï¼Œä¼ å‚æä¾›å­—æ®µåç§°ï¼ˆæ¨èï¼‰</h5>
<p>å…·ä½“ç»†èŠ‚å¯ä»¥å‚è€ƒ<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Classes/Public_class_fields">è¿™ä»½æ–‡æ¡£</a>ï¼Œè¿™ä¹Ÿæ˜¯æ¨èçš„ä¸€ç§å†™æ³•ï¼Œå¯ä»¥é¿å…åœ¨è°ƒç”¨æ—¶åˆ›å»ºå¤šä½™çš„ç®­å¤´å‡½æ•°ã€‚</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Counter</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> &#123;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">props</span>) &#123;<br>    <span class="hljs-variable language_">super</span>(props);<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = &#123; <span class="hljs-attr">count</span>: <span class="hljs-number">0</span> &#125;;<br>  &#125;<br><br>  add = <span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Clicked!&quot;</span>);<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;this =&quot;</span>);<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>);<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(&#123; <span class="hljs-attr">count</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">count</span> + <span class="hljs-number">1</span> &#125;);<br>  &#125;;<br><br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Count: &#123;this.state.count&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;this.add&#125;</span>&gt;</span>+1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/&gt;</span></span><br>    );<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h5 id="ä½¿ç”¨-bind-æ‰‹åŠ¨ç»‘å®š-this">2.ä½¿ç”¨ bind æ‰‹åŠ¨ç»‘å®š this</h5>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Counter</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> &#123;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">props</span>) &#123;<br>    <span class="hljs-variable language_">super</span>(props);<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = &#123; <span class="hljs-attr">count</span>: <span class="hljs-number">0</span> &#125;;<br>  &#125;<br><br>  <span class="hljs-title function_">add</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Clicked!&quot;</span>);<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;this =&quot;</span>);<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>);<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(&#123; <span class="hljs-attr">count</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">count</span> + <span class="hljs-number">1</span> &#125;);<br>  &#125;<br><br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Count: &#123;this.state.count&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;this.add.bind(this)&#125;</span>&gt;</span>+1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/&gt;</span></span><br>    );<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>æ³¨æ„ bind è¿”å›çš„æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ‰€ä»¥è¿™ä¹ˆå†™æ˜¯å¯ä»¥çš„ã€‚</p>
<h5 id="ä½¿ç”¨-call-æ‰‹åŠ¨ç»‘å®š-this">3.ä½¿ç”¨ call æ‰‹åŠ¨ç»‘å®š this</h5>
<p>çœŸçš„ä¼šæœ‰äººè¿™ä¹ˆå†™å—ï¼Ÿ</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Counter</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> &#123;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">props</span>) &#123;<br>    <span class="hljs-variable language_">super</span>(props);<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = &#123; <span class="hljs-attr">count</span>: <span class="hljs-number">0</span> &#125;;<br>  &#125;<br><br>  <span class="hljs-title function_">add</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Clicked!&quot;</span>);<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;this =&quot;</span>);<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>);<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(&#123; <span class="hljs-attr">count</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">count</span> + <span class="hljs-number">1</span> &#125;);<br>  &#125;<br><br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Count: &#123;this.state.count&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> this.add.call(this)&#125;&gt;+1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/&gt;</span></span><br>    );<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h4 id="react-çš„äº‹ä»¶å¤„ç†å‡½æ•°">react çš„äº‹ä»¶å¤„ç†å‡½æ•°</h4>
<p>åœ¨åˆšæ‰æˆ‘ä»¬å®ç°çš„è®¡æ•°å™¨ç»„ä»¶ä¸­å·²ç»ç”¨åˆ°äº† react ä¸­çš„äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ä¼ é€’ç»™ button çš„ onClick å±æ€§ï¼Œæ­£å¦‚å…¶åï¼Œè¿™ä¸ªäº‹ä»¶å¤„ç†å‡½æ•°ä¼šåœ¨ç»„ä»¶è¢«ç‚¹å‡»æ—¶è§¦å‘ã€‚ æ­¤å¤–å¸¸è§çš„äº‹ä»¶å¤„ç†å‡½æ•°è¿˜æœ‰ onFocus, onKeyPress ç­‰ç­‰ã€‚å®Œæ•´çš„åˆ—è¡¨å¯ä»¥å‚è€ƒ react æ–‡æ¡£<a target="_blank" rel="noopener" href="https://zh-hans.reactjs.org/docs/events.html">æä¾›çš„éƒ¨åˆ†</a>ã€‚ å¦å¤–å°±æ˜¯åœ¨å­ç»„ä»¶å¤„ç†äº‹ä»¶æ—¶ï¼Œæœ‰æ—¶å€™éœ€è¦é¿å…çˆ¶ç»„ä»¶ï¼ˆå†’æ³¡ï¼‰æˆ–è€…è‡ªèº«çš„é»˜è®¤è¡Œä¸ºã€‚ è¿™é‡Œé‡‡ç”¨è¡¨å•ç»„ä»¶ä½œä¸ºä¾‹å­ï¼Œå½“ submit æ—¶ä¼šè§¦å‘é¡µé¢åˆ·æ–°ï¼Œæˆ‘ä»¬å°è¯•åœ¨ç»„ä»¶ä¸­é˜»æ­¢é»˜è®¤è¡Œä¸ºã€‚</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Form</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleSubmit</span>(<span class="hljs-params">e</span>) &#123;<br>    e.<span class="hljs-title function_">preventDefault</span>();<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;You clicked submit.&quot;</span>);<br>  &#125;<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">&#123;handleSubmit&#125;</span>&gt;</span></span><br><span class="language-xml">      Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span>&gt;</span>Submit<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>Â  Â &#123;&quot; &quot;&#125;</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span><br>  );<br>&#125;<br></code></pre></td></tr></table></figure>
<p>è¿™é‡Œ onSubmit ç»‘å®šåˆ°äº†ä¸€ä¸ªæ¥å—åˆæˆäº‹ä»¶ e çš„å‡½æ•°ï¼Œåœ¨ handleSubmit ä¸­è°ƒç”¨ e çš„ preeventDefault æ–¹æ³•é˜»æ­¢å…¶é»˜è®¤è¡Œä¸ºã€‚ å½“ç„¶å°±åƒä¸Šä¸€èŠ‚ä¸­ä»‹ç»çš„å„ç§å†™æ³•ä¸€æ ·ï¼Œä¹Ÿå¯ä»¥æ”¹å†™æˆç±»ç»„ä»¶çš„å½¢å¼ã€‚</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Form</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> &#123;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">props</span>) &#123;<br>    <span class="hljs-variable language_">super</span>(props);<br>  &#125;<br><br>  handleSubmit = <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> &#123;<br>    e.<span class="hljs-title function_">preventDefault</span>();<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;You clicked submit.&quot;</span>);<br>  &#125;;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">&#123;this.handleSubmit&#125;</span>&gt;</span></span><br><span class="language-xml">        Â  Â  Â  Â  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span>&gt;</span>Submit<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>Â  Â  Â &#123;&quot; &quot;&#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span><br>    );<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h4 id="äº‹ä»¶å¤„ç†ä¼ é€’é¢å¤–å‚æ•°">äº‹ä»¶å¤„ç†ä¼ é€’é¢å¤–å‚æ•°</h4>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Hello</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> &#123;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;(e)</span> =&gt;</span> this.handleClick(e, &quot;click button&quot;)&#125;&gt;</span><br><span class="language-xml">          button</span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    );<br>  &#125;<br><br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">props</span>) &#123;<br>    <span class="hljs-variable language_">super</span>(props);<br>  &#125;<br><br>  handleClick = <span class="hljs-function">(<span class="hljs-params">e, msg</span>) =&gt;</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(msg);<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(e);<br>  &#125;;<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="å—æ§ç»„ä»¶">å—æ§ç»„ä»¶</h3>
<p>åœ¨ä½¿ç”¨ç»„ä»¶å»åˆ›å»ºä¿å­˜æ•°æ®å¹¶å¯¹è¾“å…¥æ•°æ®è¿›è¡Œæ¸²æŸ“çš„åº”ç”¨æ—¶ï¼Œä¸€ç§å¾ˆå¸¸è§çš„çš„æ‰‹æ³•æ˜¯ä½¿ç”¨å—æ§ç»„ä»¶ï¼Œå³åœ¨çˆ¶ç»„ä»¶ä¸­ä¿å­˜çŠ¶æ€ï¼Œå­ç»„ä»¶æ ¹æ®çˆ¶ç»„ä»¶çš„ state è¿›è¡Œæ¸²æŸ“ï¼Œå½“éœ€è¦è¿›è¡ŒçŠ¶æ€å˜æ›´æ—¶ï¼Œå­ç»„ä»¶è°ƒç”¨çˆ¶ç»„ä»¶ä¼ å…¥çš„å‡½æ•°æ¥æ›´æ”¹çŠ¶æ€ã€‚</p>
<pre><code class=" mermaid">graph TD
A[çˆ¶ç»„ä»¶] --&gt;|æ•°æ®æµ| B[å­ç»„ä»¶]
B -.-&gt; |æ§åˆ¶æµ| A
</code></pre>
<p>æˆ‘ä»¬æ¥ä¸‹æ¥å†™ä¸€ä¸ªè¡¨å•çš„ä¾‹å­æ¥æ¼”ç¤ºä¸€ä¸‹ã€‚</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">PackagedForm</span> /&gt;</span></span>;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">PackagedForm</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> &#123;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">props</span>) &#123;<br>    <span class="hljs-variable language_">super</span>(props);<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = &#123; <span class="hljs-attr">input</span>: <span class="hljs-string">&quot;&quot;</span> &#125;;<br>  &#125;<br><br>  handleChange = <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(&#123; <span class="hljs-attr">input</span>: e.<span class="hljs-property">target</span>.<span class="hljs-property">value</span> &#125;);<br>  &#125;;<br><br>  handleSubmit = <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> &#123;<br>    <span class="hljs-title function_">alert</span>(<span class="hljs-string">&quot;æäº¤çš„åå­—: &quot;</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">input</span>);<br>    e.<span class="hljs-title function_">preventDefault</span>();<br>  &#125;;<br><br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">&#123;this.handleSubmit&#125;</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span></span><br><span class="language-xml">          åå­—:</span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">input</span></span></span><br><span class="hljs-tag"><span class="language-xml">            <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">            <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;this.state.input&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">            <span class="hljs-attr">onChange</span>=<span class="hljs-string">&#123;this.handleChange&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">          /&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;æäº¤&quot;</span> /&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span><br>    );<br>  &#125;<br>&#125;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span>;<br></code></pre></td></tr></table></figure>
<p>åœ¨è¿™é‡Œï¼Œè¡¨å•æœ¬èº«å¹¶ä¸ä¼šä¿å­˜æ•°æ®ï¼Œæ‰€æœ‰çš„æ•°æ®éƒ½æ˜¯ä¿å­˜åœ¨æˆ‘ä»¬è‡ªå®šä¹‰çš„ç»„ä»¶çš„ state ä¸­ï¼Œå°±åƒåˆšæ‰é‚£å¼ æµç¨‹å›¾æè¿°çš„ä¸€æ ·ã€‚</p>
<h2 id="hocks">hocks</h2>
<p>hocks æ˜¯ react 16.8 æ–°å¼•è¿›çš„ä¸€ç§åŠŸèƒ½ï¼Œå¯ä»¥ä¸ä½¿ç”¨ class å†™æ³•ä¹Ÿèƒ½ä¿å­˜ state å’Œç®¡ç†ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸã€‚</p>
<h3 id="state-hook">State Hook</h3>
<p>state hock æä¾›äº†ä¸€ä¸ªç®€å•çš„æ–¹å¼æ¥ç®¡ç† state æ¥ä¸‹æ¥æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç®€å•çš„è®¡æ•°å™¨æ¥ä½¿ç”¨ state hock ã€‚</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; useState &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Counter</span> /&gt;</span></span>;<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Counter</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>count: &#123;count&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> setCount(count + 1)&#125;&gt;click me<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span>;<br></code></pre></td></tr></table></figure>
<p>æ˜¯ä¸æ˜¯å¾ˆç®€å•ï¼ŸuseState å‡½æ•°è¿”å›äº†ä¸€ä¸ªæ•°æ®ï¼Œé€šè¿‡æ•°ç»„è§£æ„è¯­æ³•æŠŠå…¶å†…å®¹ç‰©ç»‘å®šåˆ° count å’Œ setCount ä¸Šï¼Œç„¶ååœ¨ç»„ä»¶ä¸­ç›´æ¥ä½¿ç”¨ count å³å¯ï¼Œå¦‚æœéœ€è¦æ›´æ–°ï¼Œä½¿ç”¨ setCount ç„¶åä¼ å…¥ç”¨äºæ›´æ–°çš„è¡¨è¾¾å¼å³å¯ã€‚</p>
<p>é¡ºå¸¦ä¸€æï¼ŒsetCount ä¸­é—´ä¹Ÿå¯ä»¥ä¼ å…¥ä¸€ä¸ªå‡½æ•°ç”¨äºæ›´æ–° state ã€‚ å¦‚æœéœ€è¦å¤šä¸ªå†…éƒ¨çŠ¶æ€ï¼Œé‡å¤å¤šæ¬¡ä½¿ç”¨ useState å³å¯ã€‚</p>
<p>useState ä½¿ç”¨èµ·æ¥éå¸¸ç±»ä¼¼äºå…¶ä»–è¯­è¨€ä¸­å®ä¾‹åŒ–å¯¹è±¡çš„é™æ€å˜é‡ï¼Œåœ¨ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸä¸­è¿™äº› state åªä¼šè¢«åˆå§‹åŒ–ä¸€æ¬¡ï¼Œç„¶åè¢«æ›´æ–°å’Œä½¿ç”¨ã€‚</p>
<h3 id="å‰¯ä½œç”¨å’Œ-efect-hock">å‰¯ä½œç”¨å’Œ Efect Hock</h3>
<p>å¥½å§ï¼Œåˆ°è¿™é‡Œæˆ‘ä»¬ä¸å¾—ä¸ç¨å¾®æåŠä¸€ç‚¹å‡½æ•°å¼ç›¸å…³çš„å†…å®¹ã€‚ å…³äºçº¯å‡½æ•°å’Œå‰¯ä½œç”¨ï¼Œè¯¦ç»†å¯ä»¥å‚è€ƒ<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Pure_function">è¿™ç¯‡ wiki</a>ã€‚</p>
<p>ç®€å•æ¥è¯´çº¯å‡½æ•°å°±æ˜¯è¾“å‡ºåªå’Œè¾“å…¥å”¯ä¸€ç»‘å®šä¸”ä¸å½±å“å…¶ä»–çŠ¶æ€ï¼Œå¦‚å…¨å±€å˜é‡ç­‰çš„å‡½æ•°ã€‚</p>
<p>å‰¯ä½œç”¨å°±æ˜¯éçº¯å‡½æ•°è°ƒç”¨æ—¶ä¼šäº§ç”Ÿçš„å½±å“ï¼ŒåŒ…æ‹¬ä¸é™äº I/Oï¼Œå…¨å±€å˜é‡çš„å†™ã€‚</p>
<p>effect hock å°±æ˜¯ä¸€ç±»ç”¨äºæ‰§è¡Œå‰¯ä½œç”¨ç›¸å…³æ“ä½œçš„ hockï¼Œæ•°æ®è·å–ï¼Œè®¾ç½®è®¢é˜…ä»¥åŠæ‰‹åŠ¨æ›´æ”¹ React ç»„ä»¶ä¸­çš„ DOM éƒ½å±äºå‰¯ä½œç”¨ã€‚</p>
<p>äº‹å®ä¸Š effect hock çš„ç”¨æ³•ç›¸å½“å¤šæ ·ï¼Œreact å›¢é˜ŸåŸºæœ¬ä¸Šè®²ä¸€å¤§å †åŸå…ˆçš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•éƒ½å¡è¿› effect hock é‡Œé¢äº†ã€‚ã€‚ã€‚æˆ‘è§‰å¾—è¿™æ ·æŒºè ¢çš„ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬ç®€å•å°†å„ä¸ªç”¨æ³•åˆ†ç±»ä»‹ç»ä¸‹ã€‚</p>
<h4 id="å¯¹åº”ç»„ä»¶æŒ‚è½½æˆ–è€…æ›´æ–°æ—¶">å¯¹åº”ç»„ä»¶æŒ‚è½½æˆ–è€…æ›´æ–°æ—¶</h4>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; useState &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; useEffect &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Counter</span> /&gt;</span></span>;<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Counter</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);<br><br>  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`clicked <span class="hljs-subst">$&#123;count&#125;</span> times`</span>);<br>  &#125;);<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>&#123;count&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> setCount((i) =&gt; i + 1)&#125;&gt;click me<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span>;<br></code></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼Œè¿™é‡Œçš„ useEffect ä¼šåœ¨å¼€å§‹æ—¶è°ƒç”¨ä¸¤æ¬¡ä¼ å…¥çš„å‡½æ•°ï¼Œè¿™å¹¶ä¸æ˜¯ä»€ä¹ˆ bug ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒå‘å¸ƒæ—¶å¹¶ä¸ä¼šæœ‰ä¸Šè¿°è¡Œä¸ºï¼Œè¯¦ç»†ä¿¡æ¯è¯·è‡ªè¡Œä½¿ç”¨æœç´¢å¼•æ“ï¼Œåœ¨æ­¤ä¸å†å™è¿°è¿‡å¤šã€‚</p>
<h4 id="å¯¹åº”ç»„ä»¶å¸è½½æ—¶æ¸…é™¤å‰¯ä½œç”¨">å¯¹åº”ç»„ä»¶å¸è½½æ—¶ï¼ˆæ¸…é™¤å‰¯ä½œç”¨ï¼‰</h4>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; useState &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; useEffect &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Box</span> /&gt;</span></span>;<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Box</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> [flag, setFlag] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">true</span>);<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;&gt;</span></span><br><span class="language-xml">      &#123;flag ? <span class="hljs-tag">&lt;<span class="hljs-name">Counter</span> /&gt;</span> : null&#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> setFlag(!flag)&#125;&gt;&#123;flag ? &quot;on&quot; : &quot;off&quot;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Counter</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);<br><br>  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`clicked <span class="hljs-subst">$&#123;count&#125;</span> times`</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> &#123;<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;unmounted&quot;</span>);<br>    &#125;;<br>  &#125;);<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>&#123;count&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> setCount((i) =&gt; i + 1)&#125;&gt;click me<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span>;<br></code></pre></td></tr></table></figure>
<p>åœ¨è¿™é‡Œï¼Œå½“ç»„ä»¶ Counter è¢«å¸è½½æ—¶ï¼Œä¼šè°ƒç”¨æˆ‘ä»¬ä¼ ç»™ useEffect çš„å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯åœ¨æ§åˆ¶å°æ‰“å°æ¶ˆæ¯ "unmounted" ã€‚</p>
<h4 id="è¿½è¸ªä¾èµ–å˜åŒ–">è¿½è¸ªä¾èµ–å˜åŒ–</h4>
<p>æœ‰æ—¶å€™æˆ‘ä»¬åªå¸Œæœ›åœ¨æŸäº›å˜é‡å˜åŒ–æ—¶æ‰ä½¿ç”¨ useEffectï¼Œè¦å®ç°è¿™ç§æ“ä½œå…¶å®å¾ˆç®€å•ï¼Œåªè¦åœ¨ useEffect çš„ç¬¬äºŒä¸ªå‚æ•°ä¸­ä¼ å…¥éœ€è¦è¿½è¸ªçš„å‚æ•°çš„åˆ—è¡¨å³å¯ã€‚</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, &#123; useState &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; useEffect &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Counter</span> /&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Counter</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> [button0, setButton0] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);<br>  <span class="hljs-keyword">const</span> [button1, setButton1] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);<br>  <span class="hljs-keyword">const</span> [button2, setButton2] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);<br><br>  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;you clicked button0&quot;</span>), [button0]);<br><br>  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;you clicked button1&quot;</span>), [button1]);<br><br>  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;you clicked button2&quot;</span>), [button2]);<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span></span><br><span class="language-xml">        button0:&#123;button0&#125; <span class="hljs-tag">&lt;<span class="hljs-name">br</span> /&gt;</span> button1:&#123;button1&#125; <span class="hljs-tag">&lt;<span class="hljs-name">br</span> /&gt;</span> button2:&#123;button2&#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> setButton0(button0 + 1)&#125; key=&#123;&quot;button0&quot;&#125;&gt;</span><br><span class="language-xml">        button0: +1</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> setButton1(button1 + 1)&#125; key=&#123;&quot;button1&quot;&#125;&gt;</span><br><span class="language-xml">        button1: +1</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> setButton2(button2 + 1)&#125; key=&#123;&quot;button2&quot;&#125;&gt;</span><br><span class="language-xml">        button2: +1</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span>;<br></code></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼Œè¿™é‡Œè¿½è¸ªçš„ä¾èµ–é¡¹éƒ½æ˜¯åŸºæœ¬å˜é‡ï¼Œå‡è®¾ä½ éœ€è¦ä¾èµ–é¡¹æ˜¯ä¸€ä¸ªå¼•ç”¨ç±»å‹ï¼Œè¯·ä¸è¦è¿™ä¹ˆå†™ï¼Œæœ‰å¯èƒ½ä¼šå‡ºç°ä¸åŠæ—¶æ›´æ–°æˆ–è€…é‡å¤æ›´æ–°ç­‰ bugï¼Œè§£å†³æ–¹æ³•åœ¨è¿™é‡Œè¯¦ç»†å™è¿°çš„è¯å¯èƒ½ä¸å¤ªåˆé€‚ï¼Œç®€å•æ¥è¯´ï¼Œä½¿ç”¨ç¬¬ä¸‰æ–¹å…¨å±€çŠ¶æ€ç®¡ç†æˆ–è€… useMemo ä¼šæ˜¯ä¸€ä¸ªå¥½ä¸»æ„ã€‚</p>
<h4 id="ä»…åœ¨æŒ‚è½½å’Œé”€æ¯æ—¶è°ƒç”¨">ä»…åœ¨æŒ‚è½½å’Œé”€æ¯æ—¶è°ƒç”¨</h4>
<p>è¿™å®é™…ä¸Šæ˜¯ä¸Šä¸€å°èŠ‚çš„å°å°æ‹“å±•ã€‚ã€‚ã€‚åªè¦æŠŠä¾èµ–æ•°ç»„å¡«å†™ä¸ºç©ºæ•°ç»„å³å¯ï¼Œæ˜¯ä¸æ˜¯å¾ˆç®€å•ï¼Ÿ</p>
<h3 id="custom-hock">Custom Hock</h3>
<p>todo...</p>
<h3 id="isthereanythingmore">isThereAnythingMore?</h3>
<p>hocks äº‹å®ä¸Šè¿˜æœ‰å¾ˆå¤šå¯ä»¥èŠä¸‹å»çš„è¯é¢˜ã€‚ã€‚ã€‚ä½†æ˜¯æ·±å…¥å±•å¼€çš„è¯å°±ä¸ç¬¦åˆè¿™ç¯‡è®°å½•çš„ä¸»æ—¨äº†ï¼è¿™åªæ˜¯ä¸€ç¯‡å…³äº react å­¦ä¹ çš„å°ä½œå“ï¼Œæ›´å¤šçš„å†…å®¹å°±äº¤ç»™ google å’Œ github å§ :)</p>
<p>è¿™é‡Œæ¨èå‡ ä¸ªè¿˜ä¸é”™çš„å­¦ä¹ èµ„æºã€‚</p>
<ol type="1">
<li><p><a target="_blank" rel="noopener" href="https://zh-hans.reactjs.org/docs/hooks-reference.html#usememo">React å®˜ç½‘çš„ Hocks API ç´¢å¼•</a></p></li>
<li><p><a target="_blank" rel="noopener" href="https://overreacted.io/zh-hans/a-complete-guide-to-useeffect/">dan_abramov å¤§ä½¬çš„å…³äº effectHocks çš„ä¸€ç¯‡é•¿æ–‡</a></p></li>
</ol>
<h2 id="é˜¶æ®µæ€§æ€»ç»“">é˜¶æ®µæ€§æ€»ç»“</h2>
<p>åœ¨å‰å‡ ä¸ªç« èŠ‚é‡Œæˆ‘ä»¬å·²ç»ä¸€èµ·ä½“éªŒäº† react çš„æ ¸å¿ƒæ¦‚å¿µï¼Œåœ¨åç»­çš„ç« èŠ‚é‡Œæˆ‘ä»¬å°†ä¼šæ›´æ·±å…¥çš„æ­¥å…¥åŸºäº react çš„å‰ç«¯å¼€å‘ï¼Œå°±åƒä¹‹å‰æ‰¿è¯ºçš„ï¼Œå­¦ä¹  ts ï¼Œç„¶åå»ä½¿ç”¨ä¸€äº›ç¬¬ä¸‰æ–¹åº“ã€‚</p>
<p>ç›¸ä¿¡æˆ‘ï¼Œè¿™ç»å¯¹ä¼šéå¸¸æœ‰è¶£çš„ ;)</p>
<h1 id="typescript">TypeScript</h1>
<p>åœ¨è¿™ä¸ªç« èŠ‚ä¸­æˆ‘ä»¬å°†ä¼šä»‹ç» ts çš„åŸºæœ¬è¯­æ³•å’Œå¦‚ä½•åœ¨ react ä¸­ä½¿ç”¨ tsx ç¼–å†™å’Œä½¿ç”¨ç»„ä»¶<del>ä»¥åŠå¦‚ä½•æˆä¸ºä¸€åç±»å‹ä½“æ“è¿åŠ¨å‘˜</del>ã€‚ æ³¨æ„ï¼Œæˆ‘ä»¬ä¸ä¼šè¯¦ç»†çš„ä»‹ç»æ‰€æœ‰æ¦‚å¿µï¼Œå®Œæ•´çš„ä»‹ç»å¯ä»¥é˜…è¯»<a target="_blank" rel="noopener" href="https://www.typescriptlang.org/docs/handbook/basic-types.html">å®˜æ–¹æ–‡æ¡£</a>ã€‚</p>
<h2 id="ç±»å‹">ç±»å‹</h2>
<h3 id="åŸºæœ¬ç±»å‹">åŸºæœ¬ç±»å‹</h3>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-comment">// å¸ƒå°”å€¼</span><br><span class="hljs-keyword">let</span> <span class="hljs-attr">flag</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>; <span class="hljs-comment">// tsé‡‡ç”¨åç½®ç±»å‹æ ‡æ³¨</span><br><span class="hljs-keyword">let</span> anoutherFlag = <span class="hljs-literal">false</span>; <span class="hljs-comment">// tsä¹Ÿæ”¯æŒç±»å‹æ¨æ–­ï¼Œæ‰€ä»¥ç»å¤§æ•°æƒ…å†µä¸‹ä¸éœ€è¦æ‰‹åŠ¨æ ‡æ³¨ç±»å‹</span><br><br><span class="hljs-comment">// number</span><br><span class="hljs-keyword">let</span> num = <span class="hljs-number">1.1</span><br><span class="hljs-keyword">const</span> <span class="hljs-built_in">number</span> = <span class="hljs-number">10</span> <span class="hljs-comment">// ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ const æ¥å£°æ˜ä¸€ä¸ªä¸å¯å˜å˜é‡</span><br><br><span class="hljs-comment">// å­—ç¬¦ä¸²</span><br><span class="hljs-keyword">const</span> name = <span class="hljs-string">&quot;ooj&quot;</span><br><span class="hljs-keyword">const</span> favorite = <span class="hljs-string">&quot;chocolate&quot;</span><br><span class="hljs-keyword">let</span> s = <span class="hljs-string">`<span class="hljs-subst">$&#123;name&#125;</span> &#x27;s favorite food is <span class="hljs-subst">$&#123;favorite&#125;</span>`</span> <span class="hljs-comment">//æ¨¡æ¿å­—ç¬¦ä¸²</span><br><br><span class="hljs-comment">// void</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">f</span>(<span class="hljs-params"></span>): <span class="hljs-built_in">void</span> &#123;<br>	<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;hi&quot;</span>)<br>&#125;<br><span class="hljs-comment">// æ— è¿”å›å€¼çš„å‡½æ•°çš„è¿”å›ç±»å‹å³ä¸º void</span><br><span class="hljs-keyword">const</span> <span class="hljs-attr">res</span>: <span class="hljs-built_in">void</span> = <span class="hljs-title function_">f</span>() <br><br><span class="hljs-comment">// null å’Œ undefined</span><br><span class="hljs-comment">// ä»»ä½•ç±»å‹çš„å­ç±»å‹</span><br><span class="hljs-keyword">let</span> <span class="hljs-attr">i</span>:<span class="hljs-built_in">number</span> = <span class="hljs-number">1</span><br>i = <span class="hljs-literal">null</span><br>i = <span class="hljs-literal">undefined</span><br><br><span class="hljs-comment">// any</span><br><span class="hljs-comment">// åŠ ä¸Šè¿™ä¸ª, ts å°±å˜å›äº† js</span><br><br></code></pre></td></tr></table></figure>
<h3 id="è”åˆç±»å‹union-types">è”åˆç±»å‹ï¼ˆUnion Typesï¼‰</h3>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-comment">//å£°æ˜è”åˆç±»å‹</span><br><span class="hljs-keyword">let</span> <span class="hljs-attr">n</span>: <span class="hljs-built_in">string</span>|numbrt = <span class="hljs-string">&quot;one&quot;</span><br>n = <span class="hljs-number">1</span><br><br><span class="hljs-comment">//å½“ä¸Šä¸‹æ–‡æ— æ³•æ¨æ–­å‡ºå…·ä½“ç±»å‹æ—¶ï¼Œè®¿é—®å±æ€§æˆ–è€…æ–¹æ³•æ—¶åªèƒ½è®¿é—®å…¬å…±å±æ€§ã€æ–¹æ³•</span><br><span class="hljs-keyword">let</span> <span class="hljs-attr">a</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-title class_">Number</span>&gt;|<span class="hljs-built_in">string</span> = <span class="hljs-string">&quot;hi&quot;</span>;<br><span class="hljs-keyword">let</span> <span class="hljs-attr">b</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-title class_">Number</span>&gt;|<span class="hljs-built_in">string</span> = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];<br><span class="hljs-keyword">const</span> len = (i : <span class="hljs-title class_">Array</span>&lt;<span class="hljs-title class_">Number</span>&gt; | <span class="hljs-built_in">string</span>): <span class="hljs-function"><span class="hljs-params">number</span> =&gt;</span> &#123;<br>  <span class="hljs-keyword">return</span> i.<span class="hljs-property">length</span><br>&#125;<br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;a: &quot;</span> + <span class="hljs-title function_">len</span>(a));<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;b: &quot;</span> + <span class="hljs-title function_">len</span>(b));<br></code></pre></td></tr></table></figure>
<h3 id="ç±»å‹åˆ«å">ç±»å‹åˆ«å</h3>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-comment">//ä¸Šä¸€å°èŠ‚çš„è”åˆç±»å‹å†™äº†å¾ˆå¤šæ‰½é‡å¤ä»£ç ï¼Œé€šè¿‡ç±»å‹åˆ«åå¯ä»¥æ›´å¥½çš„è¡¨è¿°æˆ‘ä»¬éœ€è¦çš„ç±»å‹</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">MyType</span> = <span class="hljs-title class_">Array</span>&lt;<span class="hljs-title class_">Number</span>&gt;|<span class="hljs-built_in">string</span>;<br><span class="hljs-keyword">let</span> <span class="hljs-attr">a</span>: <span class="hljs-title class_">MyType</span> = <span class="hljs-string">&quot;hi&quot;</span>;<br><span class="hljs-keyword">let</span> <span class="hljs-attr">b</span>: <span class="hljs-title class_">MyType</span> = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];<br><span class="hljs-keyword">const</span> len = (<span class="hljs-attr">i</span>: <span class="hljs-title class_">MyType</span>): <span class="hljs-function"><span class="hljs-params">number</span> =&gt;</span> &#123;<br>  <span class="hljs-keyword">return</span> i.<span class="hljs-property">length</span>;<br>&#125;<br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;a: &quot;</span> + <span class="hljs-title function_">len</span>(a));<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;b: &quot;</span> + <span class="hljs-title function_">len</span>(b));<br></code></pre></td></tr></table></figure>
<h3 id="æ•°ç»„">æ•°ç»„</h3>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-comment">//ä¸€èˆ¬å†™æ³•</span><br><span class="hljs-keyword">let</span> <span class="hljs-attr">numbers</span>: <span class="hljs-built_in">number</span>[] = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]<br><span class="hljs-comment">//æ³›å‹å†™æ³•</span><br><span class="hljs-keyword">let</span> <span class="hljs-attr">myNumbers</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-built_in">number</span>&gt; = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]<br></code></pre></td></tr></table></figure>
<h3 id="å‡½æ•°">å‡½æ•°</h3>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-comment">//å‡½æ•°çš„ç±»å‹</span><br><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">F1</span> = <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span><br><span class="hljs-keyword">const</span> <span class="hljs-attr">hi</span>: <span class="hljs-variable constant_">F1</span> = <span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;hi&quot;</span>)<br>&#125;<br><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">F2</span> = <span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">a</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">b</span>: <span class="hljs-built_in">number</span></span>) =&gt;</span> <span class="hljs-built_in">number</span>;<br><span class="hljs-keyword">const</span> <span class="hljs-attr">sub</span>: <span class="hljs-variable constant_">F2</span> = <span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">a</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">b</span>: <span class="hljs-built_in">number</span></span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">return</span> a - b;<br>&#125;<br><br><span class="hljs-comment">//å‡½æ•°çš„ç±»å‹æ ‡æ³¨</span><br><span class="hljs-keyword">const</span> <span class="hljs-attr">add</span>: <span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">a</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">b</span>: <span class="hljs-built_in">number</span></span>) =&gt;</span> <span class="hljs-built_in">number</span> = <span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">a</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">b</span>: <span class="hljs-built_in">number</span></span>) =&gt;</span>&#123;<br>	<span class="hljs-keyword">return</span> a + b;<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">mul</span>(<span class="hljs-params"><span class="hljs-attr">a</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">b</span>: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">number</span> &#123;<br>Â  <span class="hljs-keyword">return</span> a * b;<br>&#125;<br><br><span class="hljs-comment">//å¯é€‰å‚æ•°</span><br><span class="hljs-keyword">type</span> f = <span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">a</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">b</span>?: <span class="hljs-built_in">number</span></span>) =&gt;</span> <span class="hljs-built_in">number</span><br><br><span class="hljs-keyword">const</span> <span class="hljs-attr">add</span>: f = <span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">a</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">b</span>?: <span class="hljs-built_in">number</span></span>)  =&gt;</span> &#123;<br>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> b ===<span class="hljs-string">&quot;undefined&quot;</span>) &#123;<br>    <span class="hljs-keyword">return</span> a;<br>  &#125;<br>  <span class="hljs-keyword">return</span> a + b;<br>&#125;<br><br><span class="hljs-comment">//å‚æ•°é»˜è®¤å€¼</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params"><span class="hljs-attr">a</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>, <span class="hljs-attr">b</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span></span>) &#123;<br>  <span class="hljs-comment">//æ³¨æ„æ­¤æ—¶ add çš„ç±»å‹å˜æˆäº† (a?: number, b?: number) =&gt; number</span><br>  <span class="hljs-keyword">return</span> a + b;<br>&#125;<br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">add</span>());<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">add</span>(<span class="hljs-number">1</span>));<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">add</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>))<br><br><span class="hljs-comment">//å‰©ä½™å‚æ•°</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">sum</span>(<span class="hljs-params"><span class="hljs-attr">a</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>, ...<span class="hljs-attr">args</span>: <span class="hljs-built_in">number</span>[]</span>) &#123;<br>  <span class="hljs-keyword">let</span> s = a;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> i <span class="hljs-keyword">of</span> args) &#123;<br>    s += i;<br>  &#125;<br>  <span class="hljs-keyword">return</span> s;<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="ç±»å‹æ–­è¨€">ç±»å‹æ–­è¨€</h3>
<p>ç±»å‹æ–­è¨€å¯ä»¥æ¬ºéª—ç¼–è¯‘å™¨ï¼Œè®©ç¼–è¯‘å™¨è®¤ä¸ºæŸä¸ªå˜é‡çš„ç±»å‹ä¸ºå¦ä¸€ä¸ªç±»å‹ã€‚ ç±»å‹æ–­è¨€å¯ä»¥æœ‰ä¸¤ç§å†™æ³• as "ä½ æƒ³è¦çš„ç±»å‹" æˆ–è€… &lt;"ä½ æƒ³è¦çš„ç±»å‹"&gt;"å˜é‡" ï¼Œæˆ‘ä»¬æ¨èå‰ä¸€ç§å†™æ³•ï¼Œå¦åˆ™åœ¨ç¼–å†™ tsx æ—¶å¯èƒ½ä¼šäº§ç”Ÿè¯­æ³•æ­§ä¹‰ã€‚ è¿™é‡Œæˆ‘ä¸¾ä¸€ä¸ªå®é™…å¼€å‘ä¸­ä¼šç”¨åˆ°æ–­è¨€çš„åœ°æ–¹ã€‚ <figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">ReactDOM</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-dom/client&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./App&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;./index.css&#x27;</span><br><br><span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">createRoot</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;root&#x27;</span>) <span class="hljs-keyword">as</span> <span class="hljs-title class_">HTMLElement</span>).<span class="hljs-title function_">render</span>(<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">React.StrictMode</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">App</span> /&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">React.StrictMode</span>&gt;</span></span><br>)<br></code></pre></td></tr></table></figure> getElementById æ–¹æ³•çš„è¿”å›å€¼ä¸º HTMLElement | null ï¼Œä½†æ˜¯æˆ‘ä»¬å¹¶ä¸éœ€è¦å¤„ç† null çš„æƒ…å†µã€‚ã€‚å› ä¸ºå¦‚æœåœ¨æ ¹èŠ‚ç‚¹å¤„è·å–çš„æ˜¯ null , å¾ˆå¯èƒ½æ„å‘³ç€å‘ç”Ÿäº†æ›´å¤§çš„é—®é¢˜ï¼Œæ–­è¨€æˆ HTMLElement ï¼Œç„¶åçœŸå‡ºé—®é¢˜æ—¶è®©å…¶åœ¨è¿è¡Œæ—¶å´©æºƒå¯èƒ½æ˜¯æ›´å¥½çš„ä¸€ç§é€‰æ‹©ã€‚</p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/%E5%89%8D%E7%AB%AF/" class="category-chain-item">å‰ç«¯</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/react/" class="print-no-link">#react</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>reactå­¦ä¹ è®°å½•</div>
      <div>https://ooj2003.github.io/2022/07/17/æŠ€æœ¯/reactå­¦ä¹ è®°å½•/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>ä½œè€…</div>
          <div>OOJ2003</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>å‘å¸ƒäº</div>
          <div>2022å¹´7æœˆ17æ—¥</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>æ›´æ–°äº</div>
          <div>2022å¹´12æœˆ14æ—¥</div>
        </div>
      
      
        <div class="license-meta-item">
          <div>è®¸å¯åè®®</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - ç½²å">
                    <i class="iconfont icon-cc-by"></i>
                  </span>
                </a>
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/">
                  <span class="hint--top hint--rounded" aria-label="SA - ç›¸åŒæ–¹å¼å…±äº«">
                    <i class="iconfont icon-cc-sa"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2022/07/20/%E9%85%8D%E7%BD%AE/%E8%8B%A6%E9%9A%BE%E4%B9%8B%E8%B7%AF-arch%E4%BD%BF%E7%94%A8%E6%BC%AB%E8%B0%88/" title="è‹¦éš¾ä¹‹è·¯-Archä½¿ç”¨æ¼«è°ˆ">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">è‹¦éš¾ä¹‹è·¯-Archä½¿ç”¨æ¼«è°ˆ</span>
                        <span class="visible-mobile">ä¸Šä¸€ç¯‡</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2022/06/24/%E7%AC%94%E8%AE%B0/%E7%AE%97%E6%B3%95%E8%AF%BE%E8%AE%BE/" title="ç®—æ³•è¯¾è®¾">
                        <span class="hidden-mobile">ç®—æ³•è¯¾è®¾</span>
                        <span class="visible-mobile">ä¸‹ä¸€ç¯‡</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
  
  
    <article id="comments" lazyload>
      
    <div id="giscus" class="giscus"></div>
    <script type="text/javascript">
      Fluid.utils.loadComments('#giscus', function() {
        var options = {"repo":"OOJ2003/OOJ2003.github.io","repo-id":"R_kgDOGc8frQ","category":"Announcements","category-id":"DIC_kwDOGc8frc4CQTmF","theme-light":"light","theme-dark":"dark","mapping":"pathname","reactions-enabled":1,"emit-metadata":0,"input-position":"top","lang":"zh-CN"};
        var attributes = {};
        for (let option in options) {
          if (!option.startsWith('theme-')) {
            var key = option.startsWith('data-') ? option : 'data-' + option;
            attributes[key] = options[option];
          }
        }
        var light = 'light';
        var dark = 'dark';
        window.GiscusThemeLight = light;
        window.GiscusThemeDark = dark;
        attributes['data-theme'] = document.documentElement.getAttribute('data-user-color-scheme') === 'dark' ? dark : light;
        for (let attribute in attributes) {
          var value = attributes[attribute];
          if (value === undefined || value === null || value === '') {
            delete attributes[attribute];
          }
        }
        var s = document.createElement('script');
        s.setAttribute('src', 'https://giscus.app/client.js');
        s.setAttribute('crossorigin', 'anonymous');
        for (let attribute in attributes) {
          s.setAttribute(attribute, attributes[attribute]);
        }
        var ss = document.getElementsByTagName('script');
        var e = ss.length > 0 ? ss[ss.length - 1] : document.head || document.documentElement;
        e.parentNode.insertBefore(s, e.nextSibling);
      });
    </script>
    <noscript>Please enable JavaScript to view the comments</noscript>


    </article>
  


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>ç›®å½•</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  


  
  





  <script>
  Fluid.utils.createScript('https://lib.baomitu.com/mermaid/8.14.0/mermaid.min.js', function() {
    mermaid.initialize({"theme":"default"});

    Fluid.utils.listenDOMLoaded(function() {
      Fluid.events.registerRefreshCallback(function() {
        if ('mermaid' in window) {
          mermaid.init();
        }
      });
    });
  });
</script>






    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">æœç´¢</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">å…³é”®è¯</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  
      <script>
        if (!window.MathJax) {
          window.MathJax = {
            tex    : {
              inlineMath: { '[+]': [['$', '$']] }
            },
            loader : {
              load: ['ui/lazy']
            },
            options: {
              renderActions: {
                insertedScript: [200, () => {
                  document.querySelectorAll('mjx-container').forEach(node => {
                    let target = node.parentNode;
                    if (target.nodeName.toLowerCase() === 'li') {
                      target.parentNode.classList.add('has-jax');
                    }
                  });
                }, '', false]
              }
            }
          };
        } else {
          MathJax.startup.document.state(0);
          MathJax.texReset();
          MathJax.typeset();
          MathJax.typesetPromise();
        }

        Fluid.events.registerRefreshCallback(function() {
          if ('MathJax' in window && MathJax.startup.document && typeof MathJax.startup.document.state === 'function') {
            MathJax.startup.document.state(0);
            MathJax.texReset();
            MathJax.typeset();
            MathJax.typesetPromise();
          }
        });
      </script>
    

  <script  src="https://lib.baomitu.com/mathjax/3.2.2/es5/tex-mml-chtml.js" ></script>

  <script  src="/js/local-search.js" ></script>





<!-- ä¸»é¢˜çš„å¯åŠ¨é¡¹ï¼Œå°†å®ƒä¿æŒåœ¨æœ€åº•éƒ¨ -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">åšå®¢åœ¨å…è®¸ JavaScript è¿è¡Œçš„ç¯å¢ƒä¸‹æµè§ˆæ•ˆæœæ›´ä½³</div>
  </noscript>
</body>
</html>
